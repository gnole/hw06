language: cpp
jobs:
  include:
  - os: osx
    script:
    - cmake -H. -B_build
    - cmake --build _build
    - cd _build
    - cpack -G DragNDrop
    - cd ..
  - os: linux
    script:
    - cmake -H. -B_build
    - cmake --build _build
    - cd _build
    - cpack -G DEB
    - cpack -G RPM
    - cd ..
addons:
  apt:
    packages:
    - cmake
    - cmake-data
    - rpm
deploy:
  provider: releases
  api_key:
    secure: AAAAB3NzaC1yc2EAAAADAQABAAACAQDY7xJObSP+kjuy8SX7fdJc544gZQQ7B0a4dNYgO5i5YeZV2CTojOHKbCEWaND+l5S8INdfb/312Dz7WYa7SP0ZtSau2iVwcwxjWs6/naaPKPIbHY8j1820UO22/MSqx2LPSMJzsIIhJxpwSkxWdGNTHF1+u5/AWtRAQguf7LUMNF79Wax9GhFacxbGcPmECoJJ2QOXENBj8LMi4S42rNA6obn1mfol0zBxQGyDA0n2YekZVSk7XYHjwOC+boBVREpn+oDQveCWHYL+YV5TqusNcfI2t9HBLPkfx2P5EghtpcPUUtfuQOhk9JfkKjilRzUls03/DK0jMsqUDlQXZy8R1XDxYwfZGSj0aabolli9ZXVtP+kSDW/12zB/PbbdtxZQPwv3S2a8rh0lFINFgHOBjLLGKKdZRCAlGuEK550g9Za5Gp3zzV3dzMJjkUMFxugReudGs4reVyjt7ah0IyZccIJlqKYczkEdpYE4r9rglPd+TOoDwisMPb6W4adWC8yaEo1GVy0rnhmEj6Mj22DsI5nqZwktM+0H3Tz21KYtuEBr2oilWK5Ro8IzrA2TL8N59FdvOrv4us10mO9p7qDYGfXfT97jcjRSmCDhOxmWKmZ4fm5eSlsV4/wpfeZX/RFk98G/hlqiwrWFQdfVuwCU6Ki7a1Ro+BCjFShHDop9uQ==
  file:
    - ./_build/solver-1.0.0.-Darwin.dmg
    - ./_build/solver-1.0.0.-Linux.deb
    - ./_build/solver-1.0.0.-Linux.rpm
  skip_cleanup: true
  on:
    tags: true
